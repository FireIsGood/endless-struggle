/* empty css                       */function P(){}const xe=s=>s;function ct(s){return s()}function Je(){return Object.create(null)}function K(s){s.forEach(ct)}function ge(s){return typeof s=="function"}function G(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let _e;function Qe(s,e){return s===e?!0:(_e||(_e=document.createElement("a")),_e.href=e,s===_e.href)}function Ot(s){return Object.keys(s).length===0}function Et(s,...e){if(s==null){for(const n of e)n(void 0);return P}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Be(s,e,t){s.$$.on_destroy.push(Et(e,t))}function Re(s,e,t){return s.set(t),e}function Ye(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}const ut=typeof window<"u";let Ve=ut?()=>window.performance.now():()=>Date.now(),Me=ut?s=>requestAnimationFrame(s):P;const ue=new Set;function ht(s){ue.forEach(e=>{e.c(s)||(ue.delete(e),e.f())}),ue.size!==0&&Me(ht)}function Ke(s){let e;return ue.size===0&&Me(ht),{promise:new Promise(t=>{ue.add(e={c:s,f:t})}),abort(){ue.delete(e)}}}let Ae=!1;function Tt(){Ae=!0}function Pt(){Ae=!1}function It(s,e,t,n){for(;s<e;){const i=s+(e-s>>1);t(i)<=n?s=i+1:e=i}return s}function xt(s){if(s.hydrate_init)return;s.hydrate_init=!0;let e=s.childNodes;if(s.nodeName==="HEAD"){const l=[];for(let c=0;c<e.length;c++){const u=e[c];u.claim_order!==void 0&&l.push(u)}e=l}const t=new Int32Array(e.length+1),n=new Int32Array(e.length);t[0]=-1;let i=0;for(let l=0;l<e.length;l++){const c=e[l].claim_order,u=(i>0&&e[t[i]].claim_order<=c?i+1:It(1,i,d=>e[t[d]].claim_order,c))-1;n[l]=t[u]+1;const f=u+1;t[f]=l,i=Math.max(f,i)}const r=[],o=[];let a=e.length-1;for(let l=t[i]+1;l!=0;l=n[l-1]){for(r.push(e[l-1]);a>=l;a--)o.push(e[a]);a--}for(;a>=0;a--)o.push(e[a]);r.reverse(),o.sort((l,c)=>l.claim_order-c.claim_order);for(let l=0,c=0;l<o.length;l++){for(;c<r.length&&o[l].claim_order>=r[c].claim_order;)c++;const u=c<r.length?r[c]:null;s.insertBefore(o[l],u)}}function At(s,e){s.appendChild(e)}function dt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function Rt(s){const e=S("style");return e.textContent="/* empty */",jt(dt(s),e),e.sheet}function jt(s,e){return At(s.head||s,e),e.sheet}function v(s,e){if(Ae){for(xt(s),(s.actual_end_child===void 0||s.actual_end_child!==null&&s.actual_end_child.parentNode!==s)&&(s.actual_end_child=s.firstChild);s.actual_end_child!==null&&s.actual_end_child.claim_order===void 0;)s.actual_end_child=s.actual_end_child.nextSibling;e!==s.actual_end_child?(e.claim_order!==void 0||e.parentNode!==s)&&s.insertBefore(e,s.actual_end_child):s.actual_end_child=e.nextSibling}else(e.parentNode!==s||e.nextSibling!==null)&&s.appendChild(e)}function q(s,e,t){Ae&&!t?v(s,e):(e.parentNode!==s||e.nextSibling!=t)&&s.insertBefore(e,t||null)}function w(s){s.parentNode&&s.parentNode.removeChild(s)}function S(s){return document.createElement(s)}function ee(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function te(s){return document.createTextNode(s)}function A(){return te(" ")}function Xe(){return te("")}function Q(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function ft(s){return function(e){return e.preventDefault(),s.call(this,e)}}function g(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function ne(s){return s.dataset.svelteH}function T(s){return Array.from(s.childNodes)}function qt(s){s.claim_info===void 0&&(s.claim_info={last_index:0,total_claimed:0})}function pt(s,e,t,n,i=!1){qt(s);const r=(()=>{for(let o=s.claim_info.last_index;o<s.length;o++){const a=s[o];if(e(a)){const l=t(a);return l===void 0?s.splice(o,1):s[o]=l,i||(s.claim_info.last_index=o),a}}for(let o=s.claim_info.last_index-1;o>=0;o--){const a=s[o];if(e(a)){const l=t(a);return l===void 0?s.splice(o,1):s[o]=l,i?l===void 0&&s.claim_info.last_index--:s.claim_info.last_index=o,a}}return n()})();return r.claim_order=s.claim_info.total_claimed,s.claim_info.total_claimed+=1,r}function mt(s,e,t,n){return pt(s,i=>i.nodeName===e,i=>{const r=[];for(let o=0;o<i.attributes.length;o++){const a=i.attributes[o];t[a.name]||r.push(a.name)}r.forEach(o=>i.removeAttribute(o))},()=>n(e))}function k(s,e,t){return mt(s,e,t,S)}function re(s,e,t){return mt(s,e,t,ee)}function fe(s,e){return pt(s,t=>t.nodeType===3,t=>{const n=""+e;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n},()=>te(e),!0)}function R(s){return fe(s," ")}function Ue(s,e){e=""+e,s.data!==e&&(s.data=e)}function ce(s,e){s.value=e??""}function je(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function $e(s,e,t){s.classList.toggle(e,!!t)}function Lt(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}const ke=new Map;let Oe=0;function Ut(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function Nt(s,e){const t={stylesheet:Rt(e),rules:{}};return ke.set(s,t),t}function Ee(s,e,t,n,i,r,o,a=0){const l=16.666/n;let c=`{
`;for(let m=0;m<=1;m+=l){const y=e+(t-e)*r(m);c+=m*100+`%{${o(y,1-y)}}
`}const u=c+`100% {${o(t,1-t)}}
}`,f=`__svelte_${Ut(u)}_${a}`,d=dt(s),{stylesheet:h,rules:p}=ke.get(d)||Nt(d,s);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${u}`,h.cssRules.length));const b=s.style.animation||"";return s.style.animation=`${b?`${b}, `:""}${f} ${n}ms linear ${i}ms 1 both`,Oe+=1,f}function Te(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),Oe-=i,Oe||Dt())}function Dt(){Me(()=>{Oe||(ke.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&w(e)}),ke.clear())})}let me;function pe(s){me=s}function gt(){if(!me)throw new Error("Function called outside component initialization");return me}function bt(s){gt().$$.on_mount.push(s)}function Ft(s){gt().$$.on_destroy.push(s)}function Bt(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const le=[],Ne=[];let he=[];const Ze=[],Vt=Promise.resolve();let De=!1;function Mt(){De||(De=!0,Vt.then(yt))}function Y(s){he.push(s)}const qe=new Set;let oe=0;function yt(){if(oe!==0)return;const s=me;do{try{for(;oe<le.length;){const e=le[oe];oe++,pe(e),Kt(e.$$)}}catch(e){throw le.length=0,oe=0,e}for(pe(null),le.length=0,oe=0;Ne.length;)Ne.pop()();for(let e=0;e<he.length;e+=1){const t=he[e];qe.has(t)||(qe.add(t),t())}he.length=0}while(le.length);for(;Ze.length;)Ze.pop()();De=!1,qe.clear(),pe(s)}function Kt(s){if(s.fragment!==null){s.update(),K(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Y)}}function Wt(s){const e=[],t=[];he.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),he=e}let de;function We(){return de||(de=Promise.resolve(),de.then(()=>{de=null})),de}function se(s,e,t){s.dispatchEvent(Lt(`${e?"intro":"outro"}${t}`))}const Se=new Set;let F;function Pe(){F={r:0,c:[],p:F}}function Ie(){F.r||K(F.c),F=F.p}function j(s,e){s&&s.i&&(Se.delete(s),s.i(e))}function U(s,e,t,n){if(s&&s.o){if(Se.has(s))return;Se.add(s),F.c.push(()=>{Se.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const He={duration:0};function Ht(s,e,t){const n={direction:"in"};let i=e(s,t,n),r=!1,o,a,l=0;function c(){o&&Te(s,o)}function u(){const{delay:d=0,duration:h=300,easing:p=xe,tick:b=P,css:m}=i||He;m&&(o=Ee(s,0,1,h,d,p,m,l++)),b(0,1);const y=Ve()+d,C=y+h;a&&a.abort(),r=!0,Y(()=>se(s,!0,"start")),a=Ke(O=>{if(r){if(O>=C)return b(1,0),se(s,!0,"end"),c(),r=!1;if(O>=y){const _=p((O-y)/h);b(_,1-_)}}return r})}let f=!1;return{start(){f||(f=!0,Te(s),ge(i)?(i=i(n),We().then(u)):u())},invalidate(){f=!1},end(){r&&(c(),r=!1)}}}function zt(s,e,t){const n={direction:"out"};let i=e(s,t,n),r=!0,o;const a=F;a.r+=1;let l;function c(){const{delay:u=0,duration:f=300,easing:d=xe,tick:h=P,css:p}=i||He;p&&(o=Ee(s,1,0,f,u,d,p));const b=Ve()+u,m=b+f;Y(()=>se(s,!1,"start")),"inert"in s&&(l=s.inert,s.inert=!0),Ke(y=>{if(r){if(y>=m)return h(0,1),se(s,!1,"end"),--a.r||K(a.c),!1;if(y>=b){const C=d((y-b)/f);h(1-C,C)}}return r})}return ge(i)?We().then(()=>{i=i(n),c()}):c(),{end(u){u&&"inert"in s&&(s.inert=l),u&&i.tick&&i.tick(1,0),r&&(o&&Te(s,o),r=!1)}}}function et(s,e,t,n){let r=e(s,t,{direction:"both"}),o=n?0:1,a=null,l=null,c=null,u;function f(){c&&Te(s,c)}function d(p,b){const m=p.b-o;return b*=Math.abs(m),{a:o,b:p.b,d:m,duration:b,start:p.start,end:p.start+b,group:p.group}}function h(p){const{delay:b=0,duration:m=300,easing:y=xe,tick:C=P,css:O}=r||He,_={start:Ve()+b,b:p};p||(_.group=F,F.r+=1),"inert"in s&&(p?u!==void 0&&(s.inert=u):(u=s.inert,s.inert=!0)),a||l?l=_:(O&&(f(),c=Ee(s,o,p,m,b,y,O)),p&&C(0,1),a=d(_,m),Y(()=>se(s,p,"start")),Ke($=>{if(l&&$>l.start&&(a=d(l,m),l=null,se(s,a.b,"start"),O&&(f(),c=Ee(s,o,a.b,a.duration,0,y,r.css))),a){if($>=a.end)C(o=a.b,1-o),se(s,a.b,"end"),l||(a.b?f():--a.group.r||K(a.group.c)),a=null;else if($>=a.start){const I=$-a.start;o=a.a+a.d*y(I/a.duration),C(o,1-o)}}return!!(a||l)}))}return{run(p){ge(r)?We().then(()=>{r=r({direction:p?"in":"out"}),h(p)}):h(p)},end(){f(),a=l=null}}}function tt(s){return s?.length!==void 0?s:Array.from(s)}function Gt(s,e){U(s,1,1,()=>{e.delete(s.key)})}function Jt(s,e,t,n,i,r,o,a,l,c,u,f){let d=s.length,h=r.length,p=d;const b={};for(;p--;)b[s[p].key]=p;const m=[],y=new Map,C=new Map,O=[];for(p=h;p--;){const E=f(i,r,p),x=t(E);let L=o.get(x);L?n&&O.push(()=>L.p(E,e)):(L=c(x,E),L.c()),y.set(x,m[p]=L),x in b&&C.set(x,Math.abs(p-b[x]))}const _=new Set,$=new Set;function I(E){j(E,1),E.m(a,u),o.set(E.key,E),u=E.first,h--}for(;d&&h;){const E=m[h-1],x=s[d-1],L=E.key,W=x.key;E===x?(u=E.first,d--,h--):y.has(W)?!o.has(L)||_.has(L)?I(E):$.has(W)?d--:C.get(L)>C.get(W)?($.add(L),I(E)):(_.add(W),d--):(l(x,o),d--)}for(;d--;){const E=s[d];y.has(E.key)||l(E,o)}for(;h;)I(m[h-1]);return K(O),m}function H(s){s&&s.c()}function z(s,e){s&&s.l(e)}function V(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),Y(()=>{const r=s.$$.on_mount.map(ct).filter(ge);s.$$.on_destroy?s.$$.on_destroy.push(...r):K(r),s.$$.on_mount=[]}),i.forEach(Y)}function M(s,e){const t=s.$$;t.fragment!==null&&(Wt(t.after_update),K(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Qt(s,e){s.$$.dirty[0]===-1&&(le.push(s),Mt(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function X(s,e,t,n,i,r,o=null,a=[-1]){const l=me;pe(s);const c=s.$$={fragment:null,ctx:[],props:r,update:P,not_equal:i,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Je(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=t?t(s,e.props||{},(f,d,...h)=>{const p=h.length?h[0]:d;return c.ctx&&i(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&Qt(s,f)),d}):[],c.update(),u=!0,K(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){Tt();const f=T(e.target);c.fragment&&c.fragment.l(f),f.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&j(s.$$.fragment),V(s,e.target,e.anchor),Pt(),yt()}pe(l)}class Z{$$=void 0;$$set=void 0;$destroy(){M(this,1),this.$destroy=P}$on(e,t){if(!ge(t))return P;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yt);function Xt(s){const e=s-1;return e*e*e+1}function Zt(s,{delay:e=0,duration:t=400,easing:n=xe}={}){const i=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:n,css:r=>`opacity: ${r*i}`}}function Fe(s,{delay:e=0,duration:t=400,easing:n=Xt,x:i=0,y:r=0,opacity:o=0}={}){const a=getComputedStyle(s),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-o),[f,d]=Ye(i),[h,p]=Ye(r);return{delay:e,duration:t,easing:n,css:(b,m)=>`
			transform: ${c} translate(${(1-b)*f}${d}, ${(1-b)*h}${p});
			opacity: ${l-u*m}`}}class D extends Error{constructor(e){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,D.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof D||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const we=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function en(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||tn;let i=0;for(;i<s.length;){const r=s.indexOf("=",i);if(r===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<r){i=s.lastIndexOf(";",r-1)+1;continue}const a=s.slice(i,r).trim();if(t[a]===void 0){let l=s.slice(r+1,o).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1));try{t[a]=n(l)}catch{t[a]=l}}i=o+1}return t}function nt(s,e,t){const n=Object.assign({},t||{}),i=n.encode||nn;if(!we.test(s))throw new TypeError("argument name is invalid");const r=i(e);if(r&&!we.test(r))throw new TypeError("argument val is invalid");let o=s+"="+r;if(n.maxAge!=null){const a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!we.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!we.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function tn(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function nn(s){return encodeURIComponent(s)}let _t;function Ce(s){if(s)try{const e=decodeURIComponent(_t(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function wt(s,e=0){let t=Ce(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}_t=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,r=0,o="";n=e.charAt(r++);~n&&(t=i%4?64*t+n:n,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const st="pb_auth";class sn{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!wt(this.token)}get isAdmin(){return Ce(this.token).type==="admin"}get isAuthRecord(){return Ce(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=st){const n=en(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=st){const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=Ce(this.token);n.expires=i?.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const r={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let o=nt(t,JSON.stringify(r),e);const a=typeof Blob<"u"?new Blob([o]).size:o.length;if(r.model&&a>4096){r.model={id:r?.model?.id,email:r?.model?.email};const l=["collectionId","username","verified"];for(const c in this.model)l.includes(c)&&(r.model[c]=this.model[c]);o=nt(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class rn extends sn{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&window?.localStorage){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&window?.localStorage){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class ie{constructor(e){this.client=e}}class on extends ie{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,i,r,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:r}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class ze extends ie{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>(i.items=i.items?.map(r=>this.decode(r))||[],i))}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{if(!n?.items?.length)throw new D({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=async r=>this.getList(r,e||500,t).then(o=>{const a=o.items;return n=n.concat(a),a.length==o.perPage?i(r+1):n});return i(1)}}function N(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function Le(s){s._resetAutoRefresh?.()}class an extends ze{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(i=>(this.client.authStore.model?.id===i.id&&this.client.authStore.model?.collectionId===void 0&&this.client.authStore.save(this.client.authStore.token,i),i))}delete(e,t){return super.delete(e,t).then(n=>(n&&this.client.authStore.model?.id===e&&this.client.authStore.model?.collectionId===void 0&&this.client.authStore.clear(),n))}authResponse(e){const t=this.decode(e?.admin||{});return e?.token&&e?.admin&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:e?.token||"",admin:t})}async authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};r=N("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",r,n,i);const o=r.autoRefreshThreshold;delete r.autoRefreshThreshold,r.autoRefresh||Le(this.client);let a=await this.client.send(this.baseCrudPath+"/auth-with-password",r);return a=this.authResponse(a),o&&function(c,u,f,d){Le(c);const h=c.beforeSend,p=c.authStore.model,b=c.authStore.onChange((m,y)=>{(!m||y?.id!=p?.id||(y?.collectionId||p?.collectionId)&&y?.collectionId!=p?.collectionId)&&Le(c)});c._resetAutoRefresh=function(){b(),c.beforeSend=h,delete c._resetAutoRefresh},c.beforeSend=async(m,y)=>{const C=c.authStore.token;if(y.query?.autoRefresh)return h?h(m,y):{url:m,sendOptions:y};let O=c.authStore.isValid;if(O&&wt(c.authStore.token,u))try{await f()}catch{O=!1}O||await d();const _=y.headers||{};for(let $ in _)if($.toLowerCase()=="authorization"&&C==_[$]&&c.authStore.token){_[$]=c.authStore.token;break}return y.headers=_,h?h(m,y):{url:m,sendOptions:y}}}(this.client,o,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},r))),a}authRefresh(e,t){let n={method:"POST"};return n=N("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=N("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}const ln=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function vt(s){if(s){s.query=s.query||{};for(let e in s)ln.includes(e)||(s.query[e]=s[e],delete s[e])}}class St extends ie{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,n){if(!e)throw new Error("topic must be set.");let i=e;if(n){vt(n);const o="options="+encodeURIComponent(JSON.stringify({query:n.query,headers:n.headers}));i+=(i.includes("?")?"&":"?")+o}const r=function(o){const a=o;let l;try{l=JSON.parse(a?.data)}catch{}t(l||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(r),this.isConnected?this.subscriptions[i].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(i,r):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,r)}async unsubscribe(e){let t=!1;if(e){const n=this.getSubscriptionsByTopic(e);for(let i in n)if(this.hasSubscriptionListeners(i)){for(let r of this.subscriptions[i])this.eventSource?.removeEventListener(i,r);delete this.subscriptions[i],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let n in this.subscriptions)if((n+"?").startsWith(e)){t=!0;for(let i of this.subscriptions[n])this.eventSource?.removeEventListener(n,i);delete this.subscriptions[n]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let n=!1;const i=this.getSubscriptionsByTopic(e);for(let r in i){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let o=!1;for(let a=this.subscriptions[r].length-1;a>=0;a--)this.subscriptions[r][a]===t&&(o=!0,delete this.subscriptions[r][a],this.subscriptions[r].splice(a,1),this.eventSource?.removeEventListener(r,t));o&&(this.subscriptions[r].length||delete this.subscriptions[r],n||this.hasSubscriptionListeners(r)||(n=!0))}this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let t in this.subscriptions)if(this.subscriptions[t]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!e?.isAbort)throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let n in this.subscriptions)(n+"?").startsWith(e)&&(t[n]=this.subscriptions[n]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const n=this.getSubscriptionsByTopic("PB_CONNECT");for(let i in n)for(let r of n[i])r(e)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new D(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let t of this.pendingConnects)t.resolve();this.pendingConnects=[]}}}class cn extends ze{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,n){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,n)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(i=>(this.client.authStore.model?.id!==i?.id||this.client.authStore.model?.collectionId!==this.collectionIdOrName&&this.client.authStore.model?.collectionName!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i))}delete(e,t){return super.delete(e,t).then(n=>(!n||this.client.authStore.model?.id!==e||this.client.authStore.model?.collectionId!==this.collectionIdOrName&&this.client.authStore.model?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),n))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!t?.usernamePassword,emailPassword:!!t?.emailPassword,authProviders:Array.isArray(t?.authProviders)?t?.authProviders:[]}))}authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};return r=N("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",r).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,i,r,o,a){let l={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:r}};return l=N("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",l,o,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",l).then(c=>this.authResponse(c))}async authWithOAuth2(...e){if(e.length>1||typeof e?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(e?.[0]||"",e?.[1]||"",e?.[2]||"",e?.[3]||"",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{},n=(await this.listAuthMethods()).authProviders.find(l=>l.name===t.provider);if(!n)throw new D(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),r=new St(this.client);let o=null;function a(){o?.close(),r.unsubscribe()}return t.urlCallback||(o=it(void 0)),new Promise(async(l,c)=>{try{await r.subscribe("@oauth2",async h=>{const p=r.clientId;try{if(!h.state||p!==h.state)throw new Error("State parameters don't match.");const b=Object.assign({},t);delete b.provider,delete b.scopes,delete b.createData,delete b.urlCallback;const m=await this.authWithOAuth2Code(n.name,h.code,n.codeVerifier,i,t.createData,b);l(m)}catch(b){c(new D(b))}a()});const u={state:r.clientId};t.scopes?.length&&(u.scope=t.scopes.join(" "));const f=this._replaceQueryParams(n.authUrl+i,u);await(t.urlCallback||function(h){o?o.location.href=h:o=it(h)})(f)}catch(u){a(),c(new D(u))}})}authRefresh(e,t){let n={method:"POST"};return n=N("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=N("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=N("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=N("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,n,i){let r={method:"POST",body:{token:e,password:t}};return r=N("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const r={},o=i.split("&");for(const a of o){if(a=="")continue;const l=a.split("=");r[decodeURIComponent(l[0].replace(/\+/g," "))]=decodeURIComponent((l[1]||"").replace(/\+/g," "))}for(let a in t)t.hasOwnProperty(a)&&(t[a]==null?delete r[a]:r[a]=t[a]);i="";for(let a in r)r.hasOwnProperty(a)&&(i!=""&&(i+="&"),i+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(r[a].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function it(s){if(typeof window>"u"||!window?.open)throw new D(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let r=n/2-e/2,o=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+o+",left="+r+",resizable,menubar=no")}class un extends ze{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}}class hn extends ie{getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs",n)}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class dn extends ie{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class fn extends ie{getUrl(e,t,n={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let r=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+o}return r}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>t?.token||"")}}class pn extends ie{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class mn{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new rn,this.admins=new an(this),this.collections=new un(this),this.files=new fn(this),this.logs=new hn(this),this.settings=new on(this),this.realtime=new St(this),this.health=new dn(this),this.backups=new pn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new cn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let i=t[n];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",i)}return e}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async i=>{let r={};try{r=await i.json()}catch{}if(this.afterSend&&(r=await this.afterSend(i,r)),i.status>=400)throw new D({url:i.url,status:i.status,data:r});return r}).catch(i=>{throw new D(i)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),vt(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const i=Array.isArray(e[n])?e[n]:[e[n]];for(let r of i)t.append(n,r)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],r=encodeURIComponent(n);if(Array.isArray(i))for(const o of i)t.push(r+"="+encodeURIComponent(o));else i instanceof Date?t.push(r+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(i))):t.push(r+"="+encodeURIComponent(i))}return t.join("&")}}const ae=[];function Ct(s,e=P){let t;const n=new Set;function i(a){if(G(s,a)&&(s=a,t)){const l=!ae.length;for(const c of n)c[1](),ae.push(c,s);if(l){for(let c=0;c<ae.length;c+=2)ae[c][0](ae[c+1]);ae.length=0}}}function r(a){i(a(s))}function o(a,l=P){const c=[a,l];return n.add(c),n.size===1&&(t=e(i,r)||P),a(s),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:o}}const B=new mn("https://endless-struggle.pockethost.io/"),Ge=Ct(B.authStore.model);B.authStore.onChange(()=>{Ge.set(B.authStore.model)});function gn(s){let e,t,n,i="Log in to continue",r,o,a,l,c="Username",u,f,d,h,p,b="Password",m,y,C,O,_,$,I,E;return{c(){e=S("div"),t=S("div"),n=S("h2"),n.textContent=i,r=A(),o=S("form"),a=S("div"),l=S("label"),l.textContent=c,u=A(),f=S("input"),d=A(),h=S("div"),p=S("label"),p.textContent=b,m=A(),y=S("input"),C=A(),O=S("input"),_=A(),$=S("input"),this.h()},l(x){e=k(x,"DIV",{class:!0});var L=T(e);t=k(L,"DIV",{class:!0});var W=T(t);n=k(W,"H2",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-vao6yj"&&(n.textContent=i),r=R(W),o=k(W,"FORM",{});var J=T(o);a=k(J,"DIV",{class:!0});var be=T(a);l=k(be,"LABEL",{for:!0,"data-svelte-h":!0}),ne(l)!=="svelte-1wr0xay"&&(l.textContent=c),u=R(be),f=k(be,"INPUT",{id:!0,type:!0,placeholder:!0}),be.forEach(w),d=R(J),h=k(J,"DIV",{class:!0});var ye=T(h);p=k(ye,"LABEL",{for:!0,"data-svelte-h":!0}),ne(p)!=="svelte-pepa0a"&&(p.textContent=b),m=R(ye),y=k(ye,"INPUT",{id:!0,type:!0,placeholder:!0}),ye.forEach(w),C=R(J),O=k(J,"INPUT",{type:!0}),_=R(J),$=k(J,"INPUT",{type:!0,class:!0}),J.forEach(w),W.forEach(w),L.forEach(w),this.h()},h(){g(n,"class","pad"),g(l,"for","username"),g(f,"id","username"),g(f,"type","text"),g(f,"placeholder","username"),f.required=!0,g(a,"class","form-item svelte-1bo7go2"),g(p,"for","password"),g(y,"id","password"),g(y,"type","password"),g(y,"placeholder","password"),y.required=!0,g(h,"class","form-item svelte-1bo7go2"),g(O,"type","submit"),O.value="Log in",g($,"type","submit"),$.value="Sign up",g($,"class","button-secondary"),g(t,"class","log-in-container svelte-1bo7go2"),g(e,"class","log-in-wrapper svelte-1bo7go2")},m(x,L){q(x,e,L),v(e,t),v(t,n),v(t,r),v(t,o),v(o,a),v(a,l),v(a,u),v(a,f),ce(f,s[0]),v(o,d),v(o,h),v(h,p),v(h,m),v(h,y),ce(y,s[1]),v(o,C),v(o,O),v(o,_),v(o,$),I||(E=[Q(f,"input",s[5]),Q(y,"input",s[6]),Q(O,"click",s[2]),Q($,"click",s[3]),Q(o,"submit",ft(s[4]))],I=!0)},p(x,[L]){L&1&&f.value!==x[0]&&ce(f,x[0]),L&2&&y.value!==x[1]&&ce(y,x[1])},i:P,o:P,d(x){x&&w(e),I=!1,K(E)}}}function bn(s,e,t){let n,i;async function r(){if(!(n===void 0||i===void 0))try{await B.collection("users").authWithPassword(n,i),a()}catch(f){console.log(f)}}async function o(){if(!(n===void 0||i===void 0))try{const f={username:n,password:i,passwordConfirm:i,name:n,role:"user"};await B.collection("users").create(f),await r(),a()}catch(f){console.log(f)}}function a(){t(0,n=""),t(1,i="")}function l(f){Bt.call(this,s,f)}function c(){n=this.value,t(0,n)}function u(){i=this.value,t(1,i)}return[n,i,r,o,l,c,u]}class yn extends Z{constructor(e){super(),X(this,e,bn,gn,G,{})}}function _n(s){let e,t="Log out",n,i;return{c(){e=S("button"),e.textContent=t,this.h()},l(r){e=k(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-pj9a99"&&(e.textContent=t),this.h()},h(){g(e,"class","button-muted svelte-1b7r8zm")},m(r,o){q(r,e,o),n||(i=Q(e,"click",s[0]),n=!0)},p:P,i:P,o:P,d(r){r&&w(e),n=!1,i()}}}function wn(s){function e(){B.authStore.clear()}return[e]}class vn extends Z{constructor(e){super(),X(this,e,wn,_n,G,{})}}function Sn(s){let e,t,n,i,r,o;return{c(){e=ee("svg"),t=ee("g"),n=ee("g"),i=ee("polygon"),r=ee("polygon"),o=ee("path"),this.h()},l(a){e=re(a,"svg",{height:!0,width:!0,version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,viewBox:!0,"xml:space":!0});var l=T(e);t=re(l,"g",{});var c=T(t);n=re(c,"g",{});var u=T(n);i=re(u,"polygon",{style:!0,points:!0}),T(i).forEach(w),r=re(u,"polygon",{style:!0,points:!0}),T(r).forEach(w),u.forEach(w),o=re(c,"path",{style:!0,d:!0}),T(o).forEach(w),c.forEach(w),l.forEach(w),this.h()},h(){je(i,"fill","#EB9494"),g(i,"points",`491.095,274.663 512,209.868 470.595,188.773 491.69,147.361 436.692,107.222 \r
			366.311,120.335 353.313,124.566 353.313,110.891 344.038,39.902 288.863,0 256.002,32.854 256.002,424.035 256.002,424.035 \r
			264.045,435.111 313.275,487.083 381.354,486.948 388.625,441.041 434.539,448.305 455.701,383.598 421.486,320.719 \r
			413.443,309.643 426.455,305.426 		`),je(r,"fill","#F1A4A4"),g(r,"points",`223.141,0 167.966,39.902 158.691,110.891 158.691,124.566 145.689,120.335 \r
			75.305,107.235 20.31,147.361 41.408,188.773 0,209.868 20.905,274.663 85.552,305.426 98.564,309.643 90.524,320.719 \r
			56.299,383.598 77.478,448.305 123.382,441.041 130.639,486.948 198.728,487.083 247.959,435.111 256.002,424.035 256.002,32.854 \r
					`),je(o,"fill","#FFFFFF"),g(o,"d",`M362.737,245.803c0-9.383-7.596-16.973-16.966-16.973c-9.383,0-16.965,7.59-16.965,16.973\r
		c0,4.813,2.003,9.166,5.239,12.254c-3.601,7.873-10.019,17.371-18.956,26.179c-5.781,5.707-15.354,13.655-28.054,19.26\r
		c5.849-7.914,10.575-17.216,14.216-25.827c6.648-15.686,11.821-34.439,14.177-50.294c6.919-2.146,11.969-8.584,11.969-16.214\r
		c0-9.376-7.609-16.959-16.979-16.959c-9.356,0-16.952,7.583-16.952,16.959c0,6.587,3.751,12.281,9.234,15.097\r
		c-2.085,13.594-7.121,30.763-13.756,46.462c-8.205,19.402-17.968,32.076-27.866,36.111v-94.813\r
		c9.898-2.62,13.933-9.944,13.933-18.59c0-10.819-8.476-19.606-19.308-19.606c-10.832,0-19.633,8.787-19.633,19.606\r
		c0,8.577,5.213,15.862,13.133,18.536v94.826c-9.883-4.042-18.78-16.444-26.93-35.407c-6.621-15.395-10.954-32.286-13.052-45.724\r
		c5.47-2.796,9.274-8.503,9.274-15.083c0-9.376-7.569-16.966-16.938-16.966c-9.383,0-16.966,7.59-16.966,16.966\r
		c0,7.63,5.064,14.082,11.983,16.207c2.356,15.713,7.556,34.202,14.177,49.631c4.346,10.107,9.072,18.57,14.108,25.306\r
		c-23.519-10.081-40.078-29.802-46.889-44.289c3.223-3.074,5.213-7.42,5.213-12.227c0-9.363-7.583-16.959-16.952-16.959\r
		c-9.37,0-16.962,7.596-16.962,16.959c0,9.343,7.552,16.919,16.867,16.959c4.495,9.898,12.213,20.533,21.894,29.842\r
		c19.308,18.523,43.382,28.772,67.794,28.772h0.176h0.108l0,0h1.016v0.331c23.749-0.094,48.013-10.683,67.361-29.726\r
		c9.708-9.546,17.209-20.534,21.678-30.586C355.466,262.714,362.737,255.112,362.737,245.803z`),g(e,"height","800px"),g(e,"width","800px"),g(e,"version","1.1"),g(e,"id","_x36_"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(e,"viewBox","0 0 512 512"),g(e,"xml:space","preserve")},m(a,l){q(a,e,l),v(e,t),v(t,n),v(n,i),v(n,r),v(t,o)},p:P,i:P,o:P,d(a){a&&w(e)}}}class Cn extends Z{constructor(e){super(),X(this,e,null,Sn,G,{})}}function rt(s){let e,t,n,i,r,o,a;return n=new Cn({}),{c(){e=S("div"),t=S("div"),H(n.$$.fragment),i=A(),r=S("div"),this.h()},l(l){e=k(l,"DIV",{class:!0});var c=T(e);t=k(c,"DIV",{class:!0});var u=T(t);z(n.$$.fragment,u),u.forEach(w),i=R(c),r=k(c,"DIV",{class:!0}),T(r).forEach(w),c.forEach(w),this.h()},h(){g(t,"class","loading-icon svelte-cldxh"),g(r,"class","loading-bg"),g(e,"class","loading-screen svelte-cldxh"),$e(e,"loading",s[0])},m(l,c){q(l,e,c),v(e,t),V(n,t,null),v(e,i),v(e,r),a=!0},p(l,c){(!a||c&1)&&$e(e,"loading",l[0])},i(l){a||(j(n.$$.fragment,l),o&&o.end(1),a=!0)},o(l){U(n.$$.fragment,l),l&&(o=zt(e,Zt,{})),a=!1},d(l){l&&w(e),M(n),l&&o&&o.end()}}}function $n(s){let e,t,n=s[0]&&rt(s);return{c(){n&&n.c(),e=Xe()},l(i){n&&n.l(i),e=Xe()},m(i,r){n&&n.m(i,r),q(i,e,r),t=!0},p(i,[r]){i[0]?n?(n.p(i,r),r&1&&j(n,1)):(n=rt(i),n.c(),j(n,1),n.m(e.parentNode,e)):n&&(Pe(),U(n,1,1,()=>{n=null}),Ie())},i(i){t||(j(n),t=!0)},o(i){U(n),t=!1},d(i){i&&w(e),n&&n.d(i)}}}function kn(s,e,t){let{loading:n}=e;return s.$$set=i=>{"loading"in i&&t(0,n=i.loading)},[n]}class $t extends Z{constructor(e){super(),X(this,e,kn,$n,G,{loading:0})}}function On(s){let e,t;return{c(){e=S("img"),this.h()},l(n){e=k(n,"IMG",{width:!0,height:!0,src:!0,alt:!0}),this.h()},h(){g(e,"width",72),g(e,"height",72),Qe(e.src,t=`https://api.dicebear.com/7.x/icons/svg?backgroundColor=b6e3f4,c0aede,d1d4f9&backgroundType=gradientLinear&seed=${s[0]}`)||g(e,"src",t),g(e,"alt","")},m(n,i){q(n,e,i)},p(n,[i]){i&1&&!Qe(e.src,t=`https://api.dicebear.com/7.x/icons/svg?backgroundColor=b6e3f4,c0aede,d1d4f9&backgroundType=gradientLinear&seed=${n[0]}`)&&g(e,"src",t)},i:P,o:P,d(n){n&&w(e)}}}function En(s,e,t){let{seed:n}=e;return s.$$set=i=>{"seed"in i&&t(0,n=i.seed)},[n]}class kt extends Z{constructor(e){super(),X(this,e,En,On,G,{seed:0})}}const ve=Ct([]);async function Tn(s){return new Promise(e=>setTimeout(e,s))}function ot(s,e,t){const n=s.slice();return n[7]=e[t],n}function at(s,e){let t,n,i,r,o,a,l,c=e[7].expand?.author?.name+"",u,f,d,h=e[7].text+"",p,b,m,y;return i=new kt({props:{seed:e[7].expand?.author?.name??""}}),{key:s,first:null,c(){t=S("li"),n=S("div"),H(i.$$.fragment),r=A(),o=S("div"),a=S("div"),l=te("@"),u=te(c),f=A(),d=S("div"),p=te(h),b=A(),this.h()},l(C){t=k(C,"LI",{class:!0});var O=T(t);n=k(O,"DIV",{class:!0});var _=T(n);z(i.$$.fragment,_),_.forEach(w),r=R(O),o=k(O,"DIV",{class:!0});var $=T(o);a=k($,"DIV",{class:!0});var I=T(a);l=fe(I,"@"),u=fe(I,c),I.forEach(w),f=R($),d=k($,"DIV",{class:!0});var E=T(d);p=fe(E,h),E.forEach(w),$.forEach(w),b=R(O),O.forEach(w),this.h()},h(){g(n,"class","message-image shadow-md svelte-ot2vuf"),g(a,"class","author svelte-ot2vuf"),g(d,"class","content"),g(o,"class","message-body"),g(t,"class","message svelte-ot2vuf"),this.first=t},m(C,O){q(C,t,O),v(t,n),V(i,n,null),v(t,r),v(t,o),v(o,a),v(a,l),v(a,u),v(o,f),v(o,d),v(d,p),v(t,b),y=!0},p(C,O){e=C;const _={};O&4&&(_.seed=e[7].expand?.author?.name??""),i.$set(_),(!y||O&4)&&c!==(c=e[7].expand?.author?.name+"")&&Ue(u,c),(!y||O&4)&&h!==(h=e[7].text+"")&&Ue(p,h)},i(C){y||(j(i.$$.fragment,C),C&&(m||Y(()=>{m=Ht(t,Fe,{x:30,duration:e[0]?0:400}),m.start()})),y=!0)},o(C){U(i.$$.fragment,C),y=!1},d(C){C&&w(t),M(i)}}}function Pn(s){let e,t,n,i,r=[],o=new Map,a,l,c;e=new $t({props:{loading:s[0]}});let u=tt(s[2]);const f=d=>d[7].id;for(let d=0;d<u.length;d+=1){let h=ot(s,u,d),p=f(h);o.set(p,r[d]=at(p,h))}return{c(){H(e.$$.fragment),t=A(),n=S("div"),i=S("ul");for(let d=0;d<r.length;d+=1)r[d].c();a=A(),l=S("div"),this.h()},l(d){z(e.$$.fragment,d),t=R(d),n=k(d,"DIV",{class:!0});var h=T(n);i=k(h,"UL",{class:!0});var p=T(i);for(let b=0;b<r.length;b+=1)r[b].l(p);p.forEach(w),a=R(h),l=k(h,"DIV",{id:!0}),T(l).forEach(w),h.forEach(w),this.h()},h(){g(i,"class","svelte-ot2vuf"),g(l,"id","bottom"),g(n,"class","message-list shadow-md svelte-ot2vuf"),$e(n,"loading",s[0])},m(d,h){V(e,d,h),q(d,t,h),q(d,n,h),v(n,i);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(i,null);v(n,a),v(n,l),s[3](l),c=!0},p(d,[h]){const p={};h&1&&(p.loading=d[0]),e.$set(p),h&4&&(u=tt(d[2]),Pe(),r=Jt(r,h,f,1,d,u,o,i,Gt,at,null,ot),Ie()),(!c||h&1)&&$e(n,"loading",d[0])},i(d){if(!c){j(e.$$.fragment,d);for(let h=0;h<u.length;h+=1)j(r[h]);c=!0}},o(d){U(e.$$.fragment,d);for(let h=0;h<r.length;h+=1)U(r[h]);c=!1},d(d){d&&(w(t),w(n)),M(e,d);for(let h=0;h<r.length;h+=1)r[h].d();s[3](null)}}}function In(s,e,t){let n;Be(s,ve,u=>t(2,n=u));let i=!0,r=()=>{},o;bt(async()=>{const u=await B.collection("posts").getList(1,50,{sort:"created",expand:"author"});Re(ve,n=u.items,n),r=await B.collection("posts").subscribe("*",a),await l(),t(0,i=!1)}),Ft(async()=>{r()});async function a({action:u,record:f}){if(u==="create"){const d=await B.collection("users").getOne(f.author);f.expand={author:d},Re(ve,n=[...n,f],n),l()}u==="delete"&&Re(ve,n=n.filter(d=>d.id!==f.id),n)}async function l(){await Tn(10),o.scrollIntoView({behavior:"auto"})}function c(u){Ne[u?"unshift":"push"](()=>{o=u,t(1,o)})}return[i,o,n,c]}class xn extends Z{constructor(e){super(),X(this,e,In,Pn,G,{})}}function An(s){let e,t,n,i,r,o;return{c(){e=S("form"),t=S("input"),n=A(),i=S("input"),this.h()},l(a){e=k(a,"FORM",{class:!0});var l=T(e);t=k(l,"INPUT",{type:!0,placeholder:!0}),n=R(l),i=k(l,"INPUT",{type:!0}),l.forEach(w),this.h()},h(){g(t,"type","text"),g(t,"placeholder","Post..."),t.required=!0,g(i,"type","submit"),i.value="Send",g(e,"class","svelte-1631mkx")},m(a,l){q(a,e,l),v(e,t),ce(t,s[0]),v(e,n),v(e,i),r||(o=[Q(t,"input",s[2]),Q(e,"submit",ft(s[1]))],r=!0)},p(a,[l]){l&1&&t.value!==a[0]&&ce(t,a[0])},i:P,o:P,d(a){a&&w(e),r=!1,K(o)}}}function Rn(s,e,t){let n;Be(s,Ge,a=>t(3,n=a));let i="";async function r(){if(i==="")return;const a=i;t(0,i="");const l={text:a,author:n?.id};await B.collection("posts").create(l)}function o(){i=this.value,t(0,i)}return[i,r,o]}class jn extends Z{constructor(e){super(),X(this,e,Rn,An,G,{})}}function lt(s){let e,t,n,i,r=s[1].username+"",o,a,l,c,u,f;return t=new vn({}),c=new kt({props:{seed:s[1].username}}),{c(){e=S("div"),H(t.$$.fragment),n=A(),i=S("div"),o=te(r),a=A(),l=S("div"),H(c.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0});var h=T(e);z(t.$$.fragment,h),n=R(h),i=k(h,"DIV",{class:!0});var p=T(i);o=fe(p,r),p.forEach(w),a=R(h),l=k(h,"DIV",{class:!0});var b=T(l);z(c.$$.fragment,b),b.forEach(w),h.forEach(w),this.h()},h(){g(i,"class","username svelte-1y8lgja"),g(l,"class","user-image shadow-sm svelte-1y8lgja"),g(e,"class","user-card shadow-sm svelte-1y8lgja")},m(d,h){q(d,e,h),V(t,e,null),v(e,n),v(e,i),v(i,o),v(e,a),v(e,l),V(c,l,null),f=!0},p(d,h){(!f||h&2)&&r!==(r=d[1].username+"")&&Ue(o,r);const p={};h&2&&(p.seed=d[1].username),c.$set(p)},i(d){f||(j(t.$$.fragment,d),j(c.$$.fragment,d),d&&Y(()=>{f&&(u||(u=et(e,Fe,{y:-10,duration:400},!0)),u.run(1))}),f=!0)},o(d){U(t.$$.fragment,d),U(c.$$.fragment,d),d&&(u||(u=et(e,Fe,{y:-10,duration:400},!1)),u.run(0)),f=!1},d(d){d&&w(e),M(t),M(c),d&&u&&u.end()}}}function qn(s){let e,t;return e=new yn({}),{c(){H(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,i){V(e,n,i),t=!0},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ln(s){let e,t,n,i,r="Send a post",o,a,l;return t=new xn({}),a=new jn({}),{c(){e=S("div"),H(t.$$.fragment),n=A(),i=S("p"),i.textContent=r,o=A(),H(a.$$.fragment),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);z(t.$$.fragment,u),u.forEach(w),n=R(c),i=k(c,"P",{"data-svelte-h":!0}),ne(i)!=="svelte-ummdzd"&&(i.textContent=r),o=R(c),z(a.$$.fragment,c),this.h()},h(){g(e,"class","message-container svelte-1y8lgja")},m(c,u){q(c,e,u),V(t,e,null),q(c,n,u),q(c,i,u),q(c,o,u),V(a,c,u),l=!0},i(c){l||(j(t.$$.fragment,c),j(a.$$.fragment,c),l=!0)},o(c){U(t.$$.fragment,c),U(a.$$.fragment,c),l=!1},d(c){c&&(w(e),w(n),w(i),w(o)),M(t),M(a,c)}}}function Un(s){let e,t,n,i="Endless Struggle",r,o,a,l,c,u,f,d,h,p='<div class="footer-content svelte-1y8lgja"><p>Created by FireIsGood</p></div>',b,m=s[1]&&!s[0]&&lt(s);l=new $t({props:{loading:s[0]}});const y=[Ln,qn],C=[];function O(_,$){return _[1]?0:1}return u=O(s),f=C[u]=y[u](s),{c(){e=S("header"),t=S("div"),n=S("h1"),n.textContent=i,r=A(),m&&m.c(),o=A(),a=S("main"),H(l.$$.fragment),c=A(),f.c(),d=A(),h=S("footer"),h.innerHTML=p,this.h()},l(_){e=k(_,"HEADER",{class:!0});var $=T(e);t=k($,"DIV",{class:!0});var I=T(t);n=k(I,"H1",{"data-svelte-h":!0}),ne(n)!=="svelte-14t5sun"&&(n.textContent=i),r=R(I),m&&m.l(I),I.forEach(w),$.forEach(w),o=R(_),a=k(_,"MAIN",{class:!0});var E=T(a);z(l.$$.fragment,E),c=R(E),f.l(E),E.forEach(w),d=R(_),h=k(_,"FOOTER",{class:!0,"data-svelte-h":!0}),ne(h)!=="svelte-8udjqc"&&(h.innerHTML=p),this.h()},h(){g(t,"class","header-content svelte-1y8lgja"),g(e,"class","svelte-1y8lgja"),g(a,"class","svelte-1y8lgja"),g(h,"class","svelte-1y8lgja")},m(_,$){q(_,e,$),v(e,t),v(t,n),v(t,r),m&&m.m(t,null),q(_,o,$),q(_,a,$),V(l,a,null),v(a,c),C[u].m(a,null),q(_,d,$),q(_,h,$),b=!0},p(_,[$]){_[1]&&!_[0]?m?(m.p(_,$),$&3&&j(m,1)):(m=lt(_),m.c(),j(m,1),m.m(t,null)):m&&(Pe(),U(m,1,1,()=>{m=null}),Ie());const I={};$&1&&(I.loading=_[0]),l.$set(I);let E=u;u=O(_),u!==E&&(Pe(),U(C[E],1,1,()=>{C[E]=null}),Ie(),f=C[u],f||(f=C[u]=y[u](_),f.c()),j(f,1),f.m(a,null))},i(_){b||(j(m),j(l.$$.fragment,_),j(f),b=!0)},o(_){U(m),U(l.$$.fragment,_),U(f),b=!1},d(_){_&&(w(e),w(o),w(a),w(d),w(h)),m&&m.d(),M(l),C[u].d()}}}function Nn(s,e,t){let n;Be(s,Ge,r=>t(1,n=r));let i=!0;return bt(()=>{t(0,i=!1)}),[i,n]}class Fn extends Z{constructor(e){super(),X(this,e,Nn,Un,G,{})}}export{Fn as default};
